2023/07/11
2023/07/29 20.04 -> 22.04
2025/01/10 24.04
2025/01/13 user

これはubuntu 24.04にrfriends3をインストールして実行するDockerfileです。
Dockerfileと同じ場所にstart.shを置いてください。
すでにdockerの環境は構築されているものとします。
sudoなしで実行できるよう設定してください。

１．イメージ作成

ホストで
$ id
uid=1000(user) gid=1000(user)
を実行し
Dockerfileのuid,gidを設定してください
ENV uid=1000
ENV gid=1000

$ docker build ./ -t rfriends3

２．実行

$ sh ex_rfriends.sh

実行画面に
172.17.0.2:8000
のように表示されるので、ブラウザにそれを入力すれば、rfriends3が表示されます。
まずは、ヘルプ->システム更新でrfriends3を最新にしてください。

３．共有ディレクトリ  

$HOME/share/usr2 以下に録音データが保存されており、このデータはコンテナが終了しても残っています。  
ただし、予約、録音途中のデータは消えます。  
  
４．その他  
  
コマンド覚書  
  
イメージ削除  
docker images  
docker rmi rfriends3  
docker image prune  
イメージ全削除  
$ docker rmi $(docker images -q)
  
コンテナ削除  
docker ps -a  
docker rm コンテナID  
コンテナ全削除  
$ docker rm $(docker ps -aq)  

docker df  
$ docker system df

build cache削除
$ docker builder prune  
  
  
以上
